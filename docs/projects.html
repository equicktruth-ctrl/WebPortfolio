<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projects - Erik Vigorito</title>
    <link rel="stylesheet" href="styles/style.css">
    <style>
        /* Projects Page Specific Styles */
        .projects-hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 60px 20px;
            text-align: center;
            color: white;
        }

        .projects-hero h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .projects-hero p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 700px;
            margin: 0 auto;
        }

        .projects-controls {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .repo-count {
            color: #666;
            font-size: 1rem;
        }

        .sort-dropdown {
            padding: 10px 15px;
            border: 2px solid #667eea;
            border-radius: 8px;
            background: white;
            color: #667eea;
            font-size: 1rem;
            cursor: pointer;
            font-weight: 600;
        }

        .projects-grid {
            max-width: 1200px;
            margin: 0 auto 60px;
            padding: 0 20px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
        }

        .project-card {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 25px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .project-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.15);
            border-color: #667eea;
        }

        .project-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .project-name {
            font-size: 1.3rem;
            font-weight: 700;
            color: #1f2937;
            margin: 0;
            flex: 1;
        }

        .project-name a {
            color: #667eea;
            text-decoration: none;
        }

        .project-name a:hover {
            text-decoration: underline;
        }

        .external-link-icon {
            color: #667eea;
            font-size: 1.1rem;
        }

        .project-description {
            color: #6b7280;
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 15px;
            min-height: 60px;
        }

        .project-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
        }

        .tag {
            background: #f3f4f6;
            color: #667eea;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .project-meta {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
            color: #6b7280;
            font-size: 0.9rem;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .language-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
        }

        .github-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: #667eea;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            width: 100%;
            justify-content: center;
        }

        .github-btn:hover {
            background: #5568d3;
            transform: translateX(3px);
        }

        .loading {
            text-align: center;
            padding: 60px 20px;
            color: #667eea;
            font-size: 1.2rem;
        }

        .error {
            text-align: center;
            padding: 60px 20px;
            color: #dc2626;
            font-size: 1.2rem;
        }

        .view-all-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: white;
            color: #667eea;
            padding: 15px 30px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            border: 2px solid #667eea;
            margin: 40px auto;
            transition: all 0.3s ease;
        }

        .view-all-btn:hover {
            background: #667eea;
            color: white;
        }

        .view-all-container {
            text-align: center;
            margin: 40px 0;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .projects-hero h1 {
                font-size: 2rem;
            }

            .projects-grid {
                grid-template-columns: 1fr;
            }

            .projects-controls {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <img src="assets/logo.png" alt="EV Logo" class="logo-img">
            </a>
            <ul class="nav-menu">
                <li><a href="index.html">Home</a></li>
                <li><a href="projects.html" class="active">Projects</a></li>
                <li><a href="skills.html">Skills</a></li>
                <li><a href="blog.html">Blog</a></li>
                <li><a href="index.html#contact">Contact</a></li>
            </ul>
            <button class="theme-toggle" onclick="toggleTheme()">Toggle Light/Dark Mode</button>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="projects-hero">
        <h1>My Projects</h1>
        <p>A collection of projects I've been working on. From web applications to API integrations, here's what keeps me busy.</p>
    </section>

    <!-- Controls Section -->
    <div class="projects-controls">
        <div class="repo-count" id="repoCount">Loading repositories...</div>
        <select class="sort-dropdown" id="sortDropdown" onchange="sortProjects()">
            <option value="updated">Recently Updated</option>
            <option value="stars">Most Stars</option>
            <option value="name">Name (A-Z)</option>
        </select>
    </div>

    <!-- Projects Grid -->
    <div class="projects-grid" id="projectsGrid">
        <div class="loading">Loading your projects from GitHub...</div>
    </div>

    <!-- View All on GitHub Button -->
    <div class="view-all-container">
        <a href="https://github.com/equicktruth-ctrl?tab=repositories" target="_blank" class="view-all-btn">
            <span>View All Projects on GitHub</span>
            <span>‚Üó</span>
        </a>
    </div>

    <!-- Footer -->
    <footer>
        <p>&copy; 2024 Erik Vigorito. Built with ‚ù§Ô∏è ‚Ä¢ Deployed via GitHub Pages</p>
        <p>Invite friends to Comet with this link: <a href="https://www.perplexity.ai" target="_blank">Get Pro & Earn $20</a></p>
    </footer>

    <!-- GitHub API Script -->
    <script src="ask.js"></script>
    <script>
        let allRepos = [];
        const languageColors = {
            'JavaScript': '#f1e05a',
            'HTML': '#e34c26',
            'CSS': '#563d7c',
            'Python': '#3572A5',
            'Java': '#b07219',
            'TypeScript': '#2b7489',
            'C++': '#f34b7d',
            'C': '#555555',
            'Shell': '#89e051',
            'Ruby': '#701516'
        };

        // Fetch GitHub Repositories
        async function fetchGitHubRepos() {
            try {
                const response = await fetch('https://api.github.com/users/equicktruth-ctrl/repos?sort=updated&per_page=100');
                
                if (!response.ok) {
                    throw new Error('Failed to fetch repositories');
                }

                allRepos = await response.json();
                
                // Update repo count
                document.getElementById('repoCount').textContent = `Showing ${allRepos.length} repositories`;
                
                // Display repos
                displayRepos(allRepos);
            } catch (error) {
                console.error('Error fetching repos:', error);
                document.getElementById('projectsGrid').innerHTML = `
                    <div class="error">
                        <p>Unable to load projects. Please check back later.</p>
                        <p style="font-size: 0.9rem; margin-top: 10px;">Or visit my <a href="https://github.com/equicktruth-ctrl" target="_blank" style="color: #667eea;">GitHub profile</a> directly.</p>
                    </div>
                `;
            }
        }

        // Display Repositories
        function displayRepos(repos) {
            const grid = document.getElementById('projectsGrid');
            
            if (repos.length === 0) {
                grid.innerHTML = '<div class="loading">No repositories found.</div>';
                return;
            }

            grid.innerHTML = repos.map(repo => {
                const description = repo.description || 'No description available';
                const language = repo.language || 'Unknown';
                const languageColor = languageColors[language] || '#cccccc';
                const stars = repo.stargazers_count || 0;
                const forks = repo.forks_count || 0;
                
                // Get topics (tags)
                const topics = repo.topics || [];
                const topicTags = topics.slice(0, 3).map(topic => 
                    `<span class="tag">${topic}</span>`
                ).join('');

                return `
                    <div class="project-card">
                        <div class="project-header">
                            <h3 class="project-name">
                                <a href="${repo.html_url}" target="_blank">${repo.name}</a>
                            </h3>
                            <span class="external-link-icon">‚Üó</span>
                        </div>
                        <p class="project-description">${description}</p>
                        ${topicTags ? `<div class="project-tags">${topicTags}</div>` : ''}
                        <div class="project-meta">
                            <div class="meta-item">
                                <span class="language-dot" style="background-color: ${languageColor};"></span>
                                <span>${language}</span>
                            </div>
                            <div class="meta-item">‚≠ê ${stars}</div>
                            <div class="meta-item">üî± ${forks}</div>
                        </div>
                        <a href="${repo.html_url}" target="_blank" class="github-btn">
                            <span>View on GitHub</span>
                            <span>‚Üí</span>
                        </a>
                    </div>
                `;
            }).join('');
        }

        // Sort Projects
        function sortProjects() {
            const sortBy = document.getElementById('sortDropdown').value;
            let sortedRepos = [...allRepos];

            switch(sortBy) {
                case 'stars':
                    sortedRepos.sort((a, b) => (b.stargazers_count || 0) - (a.stargazers_count || 0));
                    break;
                case 'name':
                    sortedRepos.sort((a, b) => a.name.localeCompare(b.name));
                    break;
                case 'updated':
                default:
                    sortedRepos.sort((a, b) => new Date(b.updated_at) - new Date(a.updated_at));
            }

            displayRepos(sortedRepos);
        }

        // Theme Toggle Function
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
        }

        // Load saved theme
        if (localStorage.getItem('theme') === 'dark') {
            document.body.classList.add('dark-mode');
        }
